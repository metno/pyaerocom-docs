

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Diving deeper into the analysis and API &mdash; pyaerocom  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Getting started" href="obsolete/tut00_get_started.html" />
    <link rel="prev" title="Checking pyaerocom installation and access to data" href="getting_started_setup.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> pyaerocom
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#aerocom">AeroCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#citation">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#website-and-code-documentation">Website and code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#requirements">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#installation-of-pyaerocom">Installation of pyaerocom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#access-to-users-database">Access to users database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#getting-started">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#getting-started">Getting started</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="getting_started_setup.html">Checking pyaerocom installation and access to data</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Diving deeper into the analysis and API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Check-access-to-testdata">Check access to testdata</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Rectangular-regions">Rectangular regions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Binary-region-masks">Binary region masks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Filtering-of-time">Filtering of time</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Data-aggregation">Data aggregation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Caching-of-UngriddedData">Caching of UngriddedData</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Read-Aeronet-Sun-v3-level-2-data">Read Aeronet Sun v3 level 2 data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Plot-all-station-coordinates">Plot all station coordinates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Access-of-individual-stations">Access of individual stations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#You-can-also-plot-the-time-series-directly">You can also plot the time-series directly</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Colocation-with-satellite-AODs-from-MODIS">Colocation with satellite AODs from MODIS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Remark-on-the-ColocatedData-object">Remark on the ColocatedData object</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#outdated-tutorials">Outdated tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyaerocom</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Tutorials</a> &raquo;</li>
        
      <li>Diving deeper into the analysis and API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/pyaerocom-tutorials/getting_started_analysis.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># ignore warnings</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">filterwarnings</span>
<span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Diving-deeper-into-the-analysis-and-API">
<h1>Diving deeper into the analysis and API<a class="headerlink" href="#Diving-deeper-into-the-analysis-and-API" title="Permalink to this headline">¶</a></h1>
<p>This notebook is meant to give a quick introduction into the main features and workflows of <a class="reference external" href="http://aerocom.met.no/pyaerocom/">pyaerocom</a>.</p>
<p>This includes brief introductions into the following features:</p>
<ul class="simple">
<li><p>Finding model and observation data on the AeroCom servers (method <code class="docutils literal notranslate"><span class="pre">browse_database</span></code>).</p></li>
<li><p>Reading of <strong>gridded</strong> model data (<code class="docutils literal notranslate"><span class="pre">ReadGridded</span></code> class).</p></li>
<li><p>Reading of <strong>ungridded</strong> observation data (<code class="docutils literal notranslate"><span class="pre">ReadUngridded</span></code> class).</p></li>
<li><p>Working with <strong>gridded</strong> data (<code class="docutils literal notranslate"><span class="pre">GriddedData</span></code> class).</p></li>
<li><p>Working with <strong>ungridded</strong> data (<code class="docutils literal notranslate"><span class="pre">UngriddedData</span></code> class).</p></li>
<li><p>Retrieving and working with data from individual stations (<code class="docutils literal notranslate"><span class="pre">StationData</span></code> class).</p></li>
<li><p><strong>Colocation</strong> of model data with all stations from an observation network.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pyaerocom</span> <span class="k">as</span> <span class="nn">pya</span>
<span class="n">pya</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;0.10.0rc2&#39;
</pre></div></div>
</div>
<p>Should be at least 0.10.X</p>
<div class="section" id="Check-access-to-testdata">
<h2>Check access to testdata<a class="headerlink" href="#Check-access-to-testdata" title="Permalink to this headline">¶</a></h2>
<p><strong>NOTE</strong>: details regarding testdata access and intialization are covered in tutorial notebook <em>getting_started_setup.ipynb</em>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">pyaerocom.testdata_access</span> <span class="kn">import</span> <span class="n">initialise</span>
<span class="n">initialise</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Adding data search directory /home/jonasg/MyPyaerocom/testdata-minimal/modeldata.
Adding data search directory /home/jonasg/MyPyaerocom/testdata-minimal/obsdata.
Adding data search directory /home/jonasg/MyPyaerocom/testdata-minimal/config.
Adding ungridded dataset AeronetSunV3L2Subset.daily located at /home/jonasg/MyPyaerocom/testdata-minimal/obsdata/AeronetSunV3Lev2.daily/renamed.Reader: &lt;class &#39;pyaerocom.io.read_aeronet_sunv3.ReadAeronetSunV3&#39;&gt;
Adding ungridded dataset AeronetSDAV3L2Subset.daily located at /home/jonasg/MyPyaerocom/testdata-minimal/obsdata/AeronetSDAV3Lev2.daily/renamed.Reader: &lt;class &#39;pyaerocom.io.read_aeronet_sdav3.ReadAeronetSdaV3&#39;&gt;
Adding ungridded dataset AeronetInvV3L2Subset.daily located at /home/jonasg/MyPyaerocom/testdata-minimal/obsdata/AeronetInvV3Lev2.daily/renamed.Reader: &lt;class &#39;pyaerocom.io.read_aeronet_invv3.ReadAeronetInvV3&#39;&gt;
Adding ungridded dataset EBASSubset located at /home/jonasg/MyPyaerocom/testdata-minimal/obsdata/EBASMultiColumn.Reader: &lt;class &#39;pyaerocom.io.read_ebas.ReadEbas&#39;&gt;
pyaerocom-testdata is ready to be used. The data is available at /home/jonasg/MyPyaerocom/testdata-minimal
</pre></div></div>
</div>
<div class="section" id="Reading-of-and-working-with-gridded-model-data-(ReadGridded-and-GriddedData-classes)">
<h3>Reading of and working with <em>gridded</em> model data (<code class="docutils literal notranslate"><span class="pre">ReadGridded</span></code> and <code class="docutils literal notranslate"><span class="pre">GriddedData</span></code> classes)<a class="headerlink" href="#Reading-of-and-working-with-gridded-model-data-(ReadGridded-and-GriddedData-classes)" title="Permalink to this headline">¶</a></h3>
<p>This section illustrates the reading of gridded data as well as some features of the <code class="docutils literal notranslate"><span class="pre">GriddedData</span></code> class of <em>pyaerocom</em>. First, however, we have to find a valid model ID for the reading (cf. flow chart).</p>
<div class="section" id="Find-model-data">
<h4>Find model data<a class="headerlink" href="#Find-model-data" title="Permalink to this headline">¶</a></h4>
<p>The database contains data from the CAM53-Oslo model, which is used in the following. You can use the <code class="docutils literal notranslate"><span class="pre">browse_database</span></code> function of pyaerocom to find model ID’s (which can be quite cryptic sometimes) using wildcard pattern search.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pya</span><span class="o">.</span><span class="n">browse_database</span><span class="p">(</span><span class="s1">&#39;*TM5*&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Pyaerocom ReadGridded
---------------------
Data ID: TM5-met2010_CTRL-TEST
Data directory: /home/jonasg/MyPyaerocom/testdata-minimal/modeldata/TM5-met2010_CTRL-TEST/renamed
Available experiments: [&#39;AP3&#39;]
Available years: [2010]
Available frequencies [&#39;daily&#39; &#39;monthly&#39;]
Available variables: [&#39;abs550aer&#39;, &#39;od550aer&#39;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;TM5-met2010_CTRL-TEST&#39;]
</pre></div></div>
</div>
</div>
<div class="section" id="Initiate-reader-class">
<h4>Initiate reader class<a class="headerlink" href="#Initiate-reader-class" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">reader</span> <span class="o">=</span> <span class="n">pya</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ReadGridded</span><span class="p">(</span><span class="s1">&#39;TM5-met2010_CTRL-TEST&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>You can have a look at the individual files and corresponding metadata using the <code class="docutils literal notranslate"><span class="pre">file_info</span></code> attribute:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">reader</span><span class="o">.</span><span class="n">file_info</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>var_name</th>
      <th>year</th>
      <th>ts_type</th>
      <th>vert_code</th>
      <th>data_id</th>
      <th>name</th>
      <th>meteo</th>
      <th>experiment</th>
      <th>perturbation</th>
      <th>is_at_stations</th>
      <th>3D</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>abs550aer</td>
      <td>2010</td>
      <td>daily</td>
      <td>Column</td>
      <td>TM5-met2010_CTRL-TEST</td>
      <td>TM5</td>
      <td>met2010</td>
      <td>AP3</td>
      <td>CTRL2019</td>
      <td>False</td>
      <td>False</td>
      <td>aerocom3_TM5-met2010_AP3-CTRL2019_abs550aer_Co...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>abs550aer</td>
      <td>2010</td>
      <td>monthly</td>
      <td>Column</td>
      <td>TM5-met2010_CTRL-TEST</td>
      <td>TM5</td>
      <td>met2010</td>
      <td>AP3</td>
      <td>CTRL2019</td>
      <td>False</td>
      <td>False</td>
      <td>aerocom3_TM5-met2010_AP3-CTRL2019_abs550aer_Co...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>od550aer</td>
      <td>2010</td>
      <td>daily</td>
      <td>Column</td>
      <td>TM5-met2010_CTRL-TEST</td>
      <td>TM5</td>
      <td>met2010</td>
      <td>AP3</td>
      <td>CTRL2019</td>
      <td>False</td>
      <td>False</td>
      <td>aerocom3_TM5-met2010_AP3-CTRL2019_od550aer_Col...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>od550aer</td>
      <td>2010</td>
      <td>monthly</td>
      <td>Column</td>
      <td>TM5-met2010_CTRL-TEST</td>
      <td>TM5</td>
      <td></td>
      <td>AP3</td>
      <td>CTRL2016</td>
      <td>False</td>
      <td>False</td>
      <td>aerocom3_TM5_AP3-CTRL2016_od550aer_Column_2010...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>You can also filter this attribute based on what you are interested in. E.g.:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">reader</span><span class="o">.</span><span class="n">filter_files</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;od550aer&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>var_name</th>
      <th>year</th>
      <th>ts_type</th>
      <th>vert_code</th>
      <th>data_id</th>
      <th>name</th>
      <th>meteo</th>
      <th>experiment</th>
      <th>perturbation</th>
      <th>is_at_stations</th>
      <th>3D</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>od550aer</td>
      <td>2010</td>
      <td>daily</td>
      <td>Column</td>
      <td>TM5-met2010_CTRL-TEST</td>
      <td>TM5</td>
      <td>met2010</td>
      <td>AP3</td>
      <td>CTRL2019</td>
      <td>False</td>
      <td>False</td>
      <td>aerocom3_TM5-met2010_AP3-CTRL2019_od550aer_Col...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>od550aer</td>
      <td>2010</td>
      <td>monthly</td>
      <td>Column</td>
      <td>TM5-met2010_CTRL-TEST</td>
      <td>TM5</td>
      <td></td>
      <td>AP3</td>
      <td>CTRL2016</td>
      <td>False</td>
      <td>False</td>
      <td>aerocom3_TM5_AP3-CTRL2016_od550aer_Column_2010...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Read-Aerosol-optical-depth-at-550-nm-(od550aer)">
<h4>Read Aerosol optical depth at 550 nm (od550aer)<a class="headerlink" href="#Read-Aerosol-optical-depth-at-550-nm-(od550aer)" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read_var</span><span class="p">(</span><span class="s1">&#39;od550aer&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer</span><span class="o">.</span><span class="n">quickplot_map</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_18_0.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_18_0.png" />
</div>
</div>
<p>Ups, this looks rather incomplete. The reason is that pyaerocom picked the available <em>daily</em> dataset, which is cropped in the <em>minimal</em> testdataset for storage purpose. Let’s try monthly.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_tm5</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read_var</span><span class="p">(</span><span class="s1">&#39;od550aer&#39;</span><span class="p">,</span> <span class="n">ts_type</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">)</span>
<span class="n">od550aer_tm5</span><span class="o">.</span><span class="n">quickplot_map</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_20_0.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_20_0.png" />
</div>
</div>
<p>Looking better. You may wonder why only January is displayed here. This is because <code class="docutils literal notranslate"><span class="pre">quickplot_map</span></code> picks the first available timestamp in the dataset, you may specify that explicitly.</p>
<p>Under the hood <a class="reference external" href="http://aerocom.met.no/pyaerocom/api.html#module-pyaerocom.griddeddata">pyaerocom.GriddedData</a> is based on the <a class="reference external" href="https://scitools.org.uk/iris/docs/v1.9.0/html/iris/iris/cube.html#iris.cube.Cube">iris.Cube object</a> class (<a class="reference external" href="https://scitools.org.uk/iris/docs/v1.9.0/html/index.html">iris library</a>) and features very similar functionality (and more).</p>
<p>The loaded <code class="docutils literal notranslate"><span class="pre">Cube</span></code> instance can be accessed via:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_tm5</span><span class="o">.</span><span class="n">cube</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style>
  a.iris {
      text-decoration: none !important;
  }
  table.iris {
      white-space: pre;
      border: 1px solid;
      border-color: #9c9c9c;
      font-family: monaco, monospace;
  }
  th.iris {
      background: #303f3f;
      color: #e0e0e0;
      border-left: 1px solid;
      border-color: #9c9c9c;
      font-size: 1.05em;
      min-width: 50px;
      max-width: 125px;
  }
  tr.iris :first-child {
      border-right: 1px solid #9c9c9c !important;
  }
  td.iris-title {
      background: #d5dcdf;
      border-top: 1px solid #9c9c9c;
      font-weight: bold;
  }
  .iris-word-cell {
      text-align: left !important;
      white-space: pre;
  }
  .iris-subheading-cell {
      padding-left: 2em !important;
  }
  .iris-inclusion-cell {
      padding-right: 1em !important;
  }
  .iris-panel-body {
      padding-top: 0px;
  }
  .iris-panel-title {
      padding-left: 3em;
  }
  .iris-panel-title {
      margin-top: 7px;
  }
</style>
<table class="iris" id="140428149271568">
    <tr class="iris">
<th class="iris iris-word-cell">Atmosphere Optical Thickness Due To Ambient Aerosol (1)</th>
<th class="iris iris-word-cell">time</th>
<th class="iris iris-word-cell">latitude</th>
<th class="iris iris-word-cell">longitude</th>
</tr>
    <tr class="iris">
<td class="iris-word-cell iris-subheading-cell">Shape</td>
<td class="iris iris-inclusion-cell">12</td>
<td class="iris iris-inclusion-cell">90</td>
<td class="iris iris-inclusion-cell">120</td>
</td>
    <tr class="iris">
    <td class="iris-title iris-word-cell">Dimension coordinates</td>
    <td class="iris-title"></td>
    <td class="iris-title"></td>
    <td class="iris-title"></td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        time</td>
    <td class="iris-inclusion-cell">x</td>
    <td class="iris-inclusion-cell">-</td>
    <td class="iris-inclusion-cell">-</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        latitude</td>
    <td class="iris-inclusion-cell">-</td>
    <td class="iris-inclusion-cell">x</td>
    <td class="iris-inclusion-cell">-</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        longitude</td>
    <td class="iris-inclusion-cell">-</td>
    <td class="iris-inclusion-cell">-</td>
    <td class="iris-inclusion-cell">x</td>
</tr>
<tr class="iris">
    <td class="iris-title iris-word-cell">Attributes</td>
    <td class="iris-title"></td>
    <td class="iris-title"></td>
    <td class="iris-title"></td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        Conventions</td>
    <td class="iris-word-cell" colspan="3">CF-1.6</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        computed</td>
    <td class="iris-word-cell" colspan="3">False</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        concatenated</td>
    <td class="iris-word-cell" colspan="3">False</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        contact</td>
    <td class="iris-word-cell" colspan="3">Twan van Noije (noije@knmi.nl)</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        data_id</td>
    <td class="iris-word-cell" colspan="3">TM5-met2010_CTRL-TEST</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        experiment</td>
    <td class="iris-word-cell" colspan="3">AP3</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        experiment_id</td>
    <td class="iris-word-cell" colspan="3">AP3-CTRL2016</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        from_files</td>
    <td class="iris-word-cell" colspan="3">['/home/jonasg/MyPyaerocom/testdata-minimal/modeldata/TM5-met2010_CTRL...</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        institute_id</td>
    <td class="iris-word-cell" colspan="3">KNMI</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        institution</td>
    <td class="iris-word-cell" colspan="3">Royal Netherlands Meteorological Institute, De Bilt, The Netherlands</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        meteo</td>
    <td class="iris-word-cell" colspan="3"></td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        model_id</td>
    <td class="iris-word-cell" colspan="3">TM5</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        outliers_removed</td>
    <td class="iris-word-cell" colspan="3">False</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        perturbation</td>
    <td class="iris-word-cell" colspan="3">CTRL2016</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        project_id</td>
    <td class="iris-word-cell" colspan="3">AeroCom Phase 3</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        reader</td>
    <td class="iris-word-cell" colspan="3">None</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        references</td>
    <td class="iris-word-cell" colspan="3">Van Noije, T.P.C., et al. (Geosci. Model Dev., 7, 2435-2475, 2014); Van...</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        region</td>
    <td class="iris-word-cell" colspan="3">None</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        regridded</td>
    <td class="iris-word-cell" colspan="3">False</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        source</td>
    <td class="iris-word-cell" colspan="3">TM5-mp: CTM ERA-Interim 3x2 34L</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        title</td>
    <td class="iris-word-cell" colspan="3">TM5 model output prepared for AeroCom Phase 3</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        ts_type</td>
    <td class="iris-word-cell" colspan="3">monthly</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        var_name_read</td>
    <td class="iris-word-cell" colspan="3">n/d</td>
</tr>
<tr class="iris">
    <td class="iris-title iris-word-cell">Cell methods</td>
    <td class="iris-title"></td>
    <td class="iris-title"></td>
    <td class="iris-title"></td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        point</td>
    <td class="iris-word-cell" colspan="3">longitude, latitude</td>
</tr>
<tr class="iris">
    <td class="iris-word-cell iris-subheading-cell">        mean</td>
    <td class="iris-word-cell" colspan="3">time</td>
</tr>
</table></div>
</div>
</div>
<div class="section" id="Conversion-to-xarray">
<h4>Conversion to xarray<a class="headerlink" href="#Conversion-to-xarray" title="Permalink to this headline">¶</a></h4>
<p>If you have not heard of xarray, you should <a class="reference external" href="http://xarray.pydata.org/en/stable/">check it out</a>. If you have heard of it (or maybe even used it already) you may convert a <code class="docutils literal notranslate"><span class="pre">GriddedData</span></code> object to an <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> via:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">xarr</span> <span class="o">=</span> <span class="n">od550aer_tm5</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">()</span>
<span class="n">xarr</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

.xr-wrap {
  min-width: 300px;
  max-width: 700px;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><div class='xr-wrap'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'od550aer'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 12</li><li><span class='xr-has-index'>lat</span>: 90</li><li><span class='xr-has-index'>lon</span>: 120</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-995794ec-c909-4789-9ebd-30cf2d14d7e7' class='xr-array-in' type='checkbox' ><label for='section-995794ec-c909-4789-9ebd-30cf2d14d7e7' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(12, 90, 61), meta=np.ndarray&gt;</span></div><pre class='xr-array-data'><table>
<tr>
<td>
<table>
  <thead>
    <tr><td> </td><th> Array </th><th> Chunk </th></tr>
  </thead>
  <tbody>
    <tr><th> Bytes </th><td> 518.40 kB </td> <td> 263.52 kB </td></tr>
    <tr><th> Shape </th><td> (12, 90, 120) </td> <td> (12, 90, 61) </td></tr>
    <tr><th> Count </th><td> 10 Tasks </td><td> 2 Chunks </td></tr>
    <tr><th> Type </th><td> float32 </td><td> numpy.ndarray </td></tr>
  </tbody>
</table>
</td>
<td>
<svg width="202" height="162" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="32" y2="22" style="stroke-width:2" />
  <line x1="10" y1="90" x2="32" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="90" style="stroke-width:2" />
  <line x1="32" y1="22" x2="32" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 32.70403708005059,22.70403708005059 32.70403708005059,112.7040370800506 10.0,90.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="32" y1="22" x2="152" y2="22" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="32" y2="22" style="stroke-width:2" />
  <line x1="71" y1="0" x2="93" y2="22" />
  <line x1="130" y1="0" x2="152" y2="22" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 152.7040370800506,22.70403708005059 32.70403708005059,22.70403708005059" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="32" y1="22" x2="152" y2="22" style="stroke-width:2" />
  <line x1="32" y1="112" x2="152" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="32" y1="22" x2="32" y2="112" style="stroke-width:2" />
  <line x1="93" y1="22" x2="93" y2="112" />
  <line x1="152" y1="22" x2="152" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="32.70403708005059,22.70403708005059 152.7040370800506,22.70403708005059 152.7040370800506,112.7040370800506 32.70403708005059,112.7040370800506" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="92.704037" y="132.704037" font-size="1.0rem" font-weight="100" text-anchor="middle" >120</text>
  <text x="172.704037" y="67.704037" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,172.704037,67.704037)">90</text>
  <text x="11.352019" y="121.352019" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,11.352019,121.352019)">12</text>
</svg>
</td>
</tr>
</table></pre></div></li><li class='xr-section-item'><input id='section-b5f640ee-6460-4e9b-a8f8-71866a58ab3f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b5f640ee-6460-4e9b-a8f8-71866a58ab3f' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2010-01-15 12:00:00 ... 2010-12-15 12:00:00</div><input id='attrs-725e7a12-9f4d-4cc8-ad52-147f6f142fdb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-725e7a12-9f4d-4cc8-ad52-147f6f142fdb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e35ecf4b-8d61-499f-85dd-c69013c161ad' class='xr-var-data-in' type='checkbox'><label for='data-e35ecf4b-8d61-499f-85dd-c69013c161ad' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>long_name :</span></dt><dd>Time</dd></dl></div><pre class='xr-var-data'>array([cftime.DatetimeJulian(2010, 1, 15, 12, 0, 0, 0),
       cftime.DatetimeJulian(2010, 2, 14, 0, 0, 0, 0),
       cftime.DatetimeJulian(2010, 3, 15, 12, 0, 0, 0),
       cftime.DatetimeJulian(2010, 4, 15, 0, 0, 0, 0),
       cftime.DatetimeJulian(2010, 5, 15, 12, 0, 0, 0),
       cftime.DatetimeJulian(2010, 6, 15, 0, 0, 0, 0),
       cftime.DatetimeJulian(2010, 7, 15, 12, 0, 0, 0),
       cftime.DatetimeJulian(2010, 8, 15, 12, 0, 0, 0),
       cftime.DatetimeJulian(2010, 9, 15, 0, 0, 0, 0),
       cftime.DatetimeJulian(2010, 10, 15, 12, 0, 0, 0),
       cftime.DatetimeJulian(2010, 11, 15, 0, 0, 0, 0),
       cftime.DatetimeJulian(2010, 12, 15, 12, 0, 0, 0)], dtype=object)</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-89.0 -87.0 -85.0 ... 87.0 89.0</div><input id='attrs-c70ef8a1-11d6-422b-a988-aa3339f200b1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c70ef8a1-11d6-422b-a988-aa3339f200b1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fbc31447-5743-4fb2-b79f-fffa71ab8cd3' class='xr-var-data-in' type='checkbox'><label for='data-fbc31447-5743-4fb2-b79f-fffa71ab8cd3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>Center coordinates for latitudes</dd><dt><span>units :</span></dt><dd>degrees</dd></dl></div><pre class='xr-var-data'>array([-89., -87., -85., -83., -81., -79., -77., -75., -73., -71., -69., -67.,
       -65., -63., -61., -59., -57., -55., -53., -51., -49., -47., -45., -43.,
       -41., -39., -37., -35., -33., -31., -29., -27., -25., -23., -21., -19.,
       -17., -15., -13., -11.,  -9.,  -7.,  -5.,  -3.,  -1.,   1.,   3.,   5.,
         7.,   9.,  11.,  13.,  15.,  17.,  19.,  21.,  23.,  25.,  27.,  29.,
        31.,  33.,  35.,  37.,  39.,  41.,  43.,  45.,  47.,  49.,  51.,  53.,
        55.,  57.,  59.,  61.,  63.,  65.,  67.,  69.,  71.,  73.,  75.,  77.,
        79.,  81.,  83.,  85.,  87.,  89.])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-181.5 -178.5 ... 172.5 175.5</div><input id='attrs-6ed89e02-cd51-4377-8610-c39aeadb4e66' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6ed89e02-cd51-4377-8610-c39aeadb4e66' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6d03fb7a-7445-4b65-ae74-14d01ed08426' class='xr-var-data-in' type='checkbox'><label for='data-6d03fb7a-7445-4b65-ae74-14d01ed08426' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>Center coordinates for longitudes</dd><dt><span>units :</span></dt><dd>degrees</dd></dl></div><pre class='xr-var-data'>array([-181.5, -178.5, -175.5, -172.5, -169.5, -166.5, -163.5, -160.5, -157.5,
       -154.5, -151.5, -148.5, -145.5, -142.5, -139.5, -136.5, -133.5, -130.5,
       -127.5, -124.5, -121.5, -118.5, -115.5, -112.5, -109.5, -106.5, -103.5,
       -100.5,  -97.5,  -94.5,  -91.5,  -88.5,  -85.5,  -82.5,  -79.5,  -76.5,
        -73.5,  -70.5,  -67.5,  -64.5,  -61.5,  -58.5,  -55.5,  -52.5,  -49.5,
        -46.5,  -43.5,  -40.5,  -37.5,  -34.5,  -31.5,  -28.5,  -25.5,  -22.5,
        -19.5,  -16.5,  -13.5,  -10.5,   -7.5,   -4.5,   -1.5,    1.5,    4.5,
          7.5,   10.5,   13.5,   16.5,   19.5,   22.5,   25.5,   28.5,   31.5,
         34.5,   37.5,   40.5,   43.5,   46.5,   49.5,   52.5,   55.5,   58.5,
         61.5,   64.5,   67.5,   70.5,   73.5,   76.5,   79.5,   82.5,   85.5,
         88.5,   91.5,   94.5,   97.5,  100.5,  103.5,  106.5,  109.5,  112.5,
        115.5,  118.5,  121.5,  124.5,  127.5,  130.5,  133.5,  136.5,  139.5,
        142.5,  145.5,  148.5,  151.5,  154.5,  157.5,  160.5,  163.5,  166.5,
        169.5,  172.5,  175.5])</pre></li></ul></div></li><li class='xr-section-item'><input id='section-72a0619a-b3b7-4172-9d5d-52817e0b61e7' class='xr-section-summary-in' type='checkbox'  ><label for='section-72a0619a-b3b7-4172-9d5d-52817e0b61e7' class='xr-section-summary' >Attributes: <span>(24)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>atmosphere_optical_thickness_due_to_ambient_aerosol</dd><dt><span>long_name :</span></dt><dd>Ambient Aerosol Optical Thickness at 550 nm</dd><dt><span>institution :</span></dt><dd>Royal Netherlands Meteorological Institute, De Bilt, The Netherlands</dd><dt><span>institute_id :</span></dt><dd>KNMI</dd><dt><span>source :</span></dt><dd>TM5-mp: CTM ERA-Interim 3x2 34L</dd><dt><span>model_id :</span></dt><dd>TM5</dd><dt><span>references :</span></dt><dd>Van Noije, T.P.C., et al. (Geosci. Model Dev., 7, 2435-2475, 2014); Van Noije, T.P.C., et al. (manuscript in preparation)</dd><dt><span>experiment_id :</span></dt><dd>AP3-CTRL2016</dd><dt><span>project_id :</span></dt><dd>AeroCom Phase 3</dd><dt><span>title :</span></dt><dd>TM5 model output prepared for AeroCom Phase 3</dd><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>contact :</span></dt><dd>Twan van Noije (noije@knmi.nl)</dd><dt><span>from_files :</span></dt><dd>[&#x27;/home/jonasg/MyPyaerocom/testdata-minimal/modeldata/TM5-met2010_CTRL-TEST/renamed/aerocom3_TM5_AP3-CTRL2016_od550aer_Column_2010_monthly.nc&#x27;]</dd><dt><span>data_id :</span></dt><dd>TM5-met2010_CTRL-TEST</dd><dt><span>var_name_read :</span></dt><dd>n/d</dd><dt><span>ts_type :</span></dt><dd>monthly</dd><dt><span>regridded :</span></dt><dd>False</dd><dt><span>outliers_removed :</span></dt><dd>False</dd><dt><span>computed :</span></dt><dd>False</dd><dt><span>concatenated :</span></dt><dd>False</dd><dt><span>meteo :</span></dt><dd></dd><dt><span>experiment :</span></dt><dd>AP3</dd><dt><span>perturbation :</span></dt><dd>CTRL2016</dd><dt><span>cell_methods :</span></dt><dd>longitude: latitude: point time: mean</dd></dl></div></li></ul></div></div></div>
</div>
</div>
<div class="section" id="Overview-of-what-is-in-the-data">
<h4>Overview of what is in the data<a class="headerlink" href="#Overview-of-what-is-in-the-data" title="Permalink to this headline">¶</a></h4>
<p>Simply print the object.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">od550aer</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyaerocom.GriddedData: TM5-met2010_CTRL-TEST
Grid data: atmosphere_optical_thickness_due_to_ambient_aerosol / (1) (time: 365; latitude: 11; longitude: 11)
     Dimension coordinates:
          time                                                 x              -              -
          latitude                                             -              x              -
          longitude                                            -              -              x
     Attributes:
          Conventions: CF-1.6
          NCO: 4.7.2
          computed: False
          concatenated: False
          contact: Twan van Noije (noije@knmi.nl)
          data_id: TM5-met2010_CTRL-TEST
          experiment: AP3
          experiment_id: AP3-CTRL2019
          from_files: [&#39;/home/jonasg/MyPyaerocom/testdata-minimal/modeldata/TM5-met2010_CTRL...
          history: Wed Jul  8 10:31:53 2020: ncks -d lat,20,30 -d lon,20,30 raw/aerocom3_TM5-met2010_AP3-CTRL2019_od550aer_Column_2010_daily.nc...
          institute_id: KNMI
          institution: Royal Netherlands Meteorological Institute, De Bilt, The Netherlands
          meteo: met2010
          model_id: TM5
          outliers_removed: False
          perturbation: CTRL2019
          project_id: AeroCom Phase 3
          reader: None
          references: Van Noije, T.P.C., et al. (Geosci. Model Dev., 7, 2435-2475, 2014); Bergman,...
          region: None
          regridded: False
          source: TM5-mp, r1058: CTM ERA-Interim 3x2 34L
          title: TM5 model output prepared for AeroCom Phase 3
          ts_type: daily
          var_name_read: n/d
     Cell methods:
          point: longitude, latitude
          mean: time
</pre></div></div>
</div>
</div>
<div class="section" id="Access-time-stamps">
<h4>Access time stamps<a class="headerlink" href="#Access-time-stamps" title="Permalink to this headline">¶</a></h4>
<p>Time stamps are represented as numerical values with respect to a reference date and frequency, according to the CF conventions. They can be accessed via the <code class="docutils literal notranslate"><span class="pre">time</span></code> attribute of the data class.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer</span><span class="o">.</span><span class="n">time</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
DimCoord(array([   0.,   31.,   60.,   91.,  121.,  152.,  182.,  213.,  244.,
        274.,  305.,  335.,  366.,  397.,  425.,  456.,  486.,  517.,
        547.,  578.,  609.,  639.,  670.,  700.,  731.,  762.,  790.,
        821.,  851.,  882.,  912.,  943.,  974., 1004., 1035., 1065.,
       1096., 1127., 1155., 1186., 1216., 1247., 1277., 1308., 1339.,
       1369., 1400., 1430., 1461., 1492., 1521., 1552., 1582., 1613.,
       1643., 1674., 1705., 1735., 1766., 1796., 1827., 1858., 1886.,
       1917., 1947., 1978., 2008., 2039., 2070., 2100., 2131., 2161.,
       2192., 2223., 2251., 2282., 2312., 2343., 2373., 2404., 2435.,
       2465., 2496., 2526.]), standard_name=&#39;time&#39;, units=Unit(&#39;days since 2004-01-01 00:00:00&#39;, calendar=&#39;gregorian&#39;), long_name=&#39;Time&#39;, var_name=&#39;time&#39;)
</pre></div></div>
</div>
<p>You may also want the time-stamps in the form of actual datetime-like objects. These can be computed using the <code class="docutils literal notranslate"><span class="pre">time_stamps()</span></code> method:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer</span><span class="o">.</span><span class="n">time_stamps</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([&#39;2004-01-01T00:00:00.000000&#39;, &#39;2004-02-01T00:00:00.000000&#39;,
       &#39;2004-03-01T00:00:00.000000&#39;], dtype=&#39;datetime64[us]&#39;)
</pre></div></div>
</div>
</div>
<div class="section" id="Plotting-maps">
<h4>Plotting maps<a class="headerlink" href="#Plotting-maps" title="Permalink to this headline">¶</a></h4>
<p>As introduced above, maps of individual time stamps can be plotted using the quickplot_map method. Above we used the default call, which chooses the first available timestamp. You may also specify which date you are interested in:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_tm5</span><span class="o">.</span><span class="n">quickplot_map</span><span class="p">(</span><span class="s1">&#39;2010-10&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_33_0.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_33_0.png" />
</div>
</div>
</div>
<div class="section" id="Regional-filtering">
<h4>Regional filtering<a class="headerlink" href="#Regional-filtering" title="Permalink to this headline">¶</a></h4>
<p>Regional filtering can be performed using the <a class="reference external" href="http://aerocom.met.no/pyaerocom/api.html#module-pyaerocom.filter">Filter</a> class.</p>
</div>
</div>
</div>
<div class="section" id="Rectangular-regions">
<h2>Rectangular regions<a class="headerlink" href="#Rectangular-regions" title="Permalink to this headline">¶</a></h2>
<p>An overview of rectangular AeroCom default regions can be accessed via:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">pya</span><span class="o">.</span><span class="n">region</span><span class="o">.</span><span class="n">get_all_default_region_ids</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;WORLD&#39;, &#39;ASIA&#39;, &#39;AUSTRALIA&#39;, &#39;CHINA&#39;, &#39;EUROPE&#39;, &#39;INDIA&#39;, &#39;NAFRICA&#39;, &#39;SAFRICA&#39;, &#39;SAMERICA&#39;, &#39;NAMERICA&#39;]
</pre></div></div>
</div>
<p>Let’s choose north Africa as an example. Create instance of Filter class:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">f</span> <span class="o">=</span> <span class="n">pya</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span><span class="s1">&#39;NAFRICA&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>You can print its <code class="docutils literal notranslate"><span class="pre">region</span></code> attribute to see the edges:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">region</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyaeorocom Region
Name: NAFRICA
Longitude range: [-17, 50]
Latitude range: [0, 40]
Longitude range (plots): [-17, 50]
Latitude range (plots): [0, 40]
</pre></div></div>
</div>
<p>Now apply to the model data object:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_nafrica</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">od550aer_tm5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Compare shapes:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_nafrica</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyaerocom.GriddedData
Grid data: &lt;iris &#39;Cube&#39; of Aerosol optical depth at 500nm / (1) (time: 84; latitude: 42; longitude: 57)&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_tm5</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyaerocom.GriddedData
Grid data: &lt;iris &#39;Cube&#39; of atmosphere_optical_thickness_due_to_ambient_aerosol / (1) (time: 12; latitude: 90; longitude: 120)&gt;
</pre></div></div>
</div>
<p>As you can see, the filtered object is reduced in the longitude and latitude dimension. Let’s have a look:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_nafrica</span><span class="o">.</span><span class="n">quickplot_map</span><span class="p">(</span><span class="s1">&#39;March 2010&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_46_0.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_46_0.png" />
</div>
</div>
</div>
<div class="section" id="Binary-region-masks">
<h2>Binary region masks<a class="headerlink" href="#Binary-region-masks" title="Permalink to this headline">¶</a></h2>
<p>Available <a class="reference external" href="http://www.htap.org/">HTAP</a> binary filter masks can be accessed via:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">pya</span><span class="o">.</span><span class="n">const</span><span class="o">.</span><span class="n">HTAP_REGIONS</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;PAN&#39;, &#39;EAS&#39;, &#39;NAF&#39;, &#39;MDE&#39;, &#39;LAND&#39;, &#39;SAS&#39;, &#39;SPO&#39;, &#39;OCN&#39;, &#39;SEA&#39;, &#39;RBU&#39;, &#39;EEUROPE&#39;, &#39;NAM&#39;, &#39;WEUROPE&#39;, &#39;SAF&#39;, &#39;USA&#39;, &#39;SAM&#39;, &#39;EUR&#39;, &#39;NPO&#39;, &#39;MCA&#39;]
</pre></div></div>
</div>
<p>And they are handled in the same way as the rectangular regions:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pya</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span><span class="s1">&#39;OCN&#39;</span><span class="p">)(</span><span class="n">od550aer_tm5</span><span class="p">)</span><span class="o">.</span><span class="n">quickplot_map</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Failed to compute / add area weighted mean. Reason: ValueError(&#39;Format specifier missing precision&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_50_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_50_1.png" />
</div>
</div>
<p>As you can see the provided HTAP region masks are only valid within 60<span class="math notranslate nohighlight">\(^\circ\)</span>S to 60<span class="math notranslate nohighlight">\(^\circ\)</span>N.</p>
</div>
<div class="section" id="Filtering-of-time">
<h2>Filtering of time<a class="headerlink" href="#Filtering-of-time" title="Permalink to this headline">¶</a></h2>
<p>Filtering of time is not yet included in the Filter class but can be easily performed from the <code class="docutils literal notranslate"><span class="pre">GriddedData</span></code> object directly. If you know the indices of the time stamps you want to crop, you can simply use numpy indexing syntax (remember that we have a 3D array containing time, latitude and lonfgitude).</p>
<p>Let’s say we want to filter the june to august.</p>
<p>Since the time dimension corresponds the first index in the 3D data (time, lat, lon), and since we know, that we have monthly 2010 data (see above), we may use:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_nafrica_2009</span> <span class="o">=</span> <span class="n">od550aer_nafrica</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>
<span class="n">od550aer_nafrica_2009</span><span class="o">.</span><span class="n">time_stamps</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([&#39;2010-06-15T00:00:00.000000&#39;, &#39;2010-07-15T12:00:00.000000&#39;,
       &#39;2010-08-15T12:00:00.000000&#39;], dtype=&#39;datetime64[us]&#39;)
</pre></div></div>
</div>
<p>However, this methodology might not always be handy (imagine you have a 10 year dataset of <code class="docutils literal notranslate"><span class="pre">3hourly</span></code> sampled data and want to extract three months in the 6th year …). In that case, you can perform the cropping using the actual timestamps:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_nafrica_2009_alt</span> <span class="o">=</span> <span class="n">od550aer_nafrica</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">time_range</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;6-2010&#39;</span><span class="p">,</span> <span class="s1">&#39;9-2010&#39;</span><span class="p">))</span>
<span class="n">od550aer_nafrica_2009</span><span class="o">.</span><span class="n">time_stamps</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([&#39;2010-06-15T00:00:00.000000&#39;, &#39;2010-07-15T12:00:00.000000&#39;,
       &#39;2010-08-15T12:00:00.000000&#39;], dtype=&#39;datetime64[us]&#39;)
</pre></div></div>
</div>
</div>
<div class="section" id="Data-aggregation">
<h2>Data aggregation<a class="headerlink" href="#Data-aggregation" title="Permalink to this headline">¶</a></h2>
<p>Let’s say we want to compute yearly means for each of the 3 years. In this case we can simply call the <code class="docutils literal notranslate"><span class="pre">downscale_time</span></code> method:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od550aer_nafrica</span><span class="o">.</span><span class="n">downscale_time</span><span class="p">(</span><span class="s1">&#39;yearly&#39;</span><span class="p">)</span>
<span class="n">od550aer_nafrica</span><span class="o">.</span><span class="n">quickplot_map</span><span class="p">(</span><span class="s1">&#39;2009&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
This method is deprecated. Please use new name resample_time
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_57_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_57_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_57_2.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_57_2.png" />
</div>
</div>
<p><strong>Note</strong>: seasonal aggregation is not yet implemented in pyaerocom but will follow soon.</p>
<p>In the following section the reading of ungridded data is illustrated based on the example of AERONET version 3 (level 2) data. The test dataset contains a randomly picked subset of 100 Aeronet stations. Aeronet provides different products,</p>
<p>Ungridded data in pyaerocom refers to data that is available in the form of <em>files per station</em> and that is not sampled in a manner that it would make sense to translate into a rgular gridded format such as the previously introduced <code class="docutils literal notranslate"><span class="pre">GriddedData</span></code> class.</p>
<p>Data from the AERONET network (that is introduced in the following), for instance, is provided in the form of column seperated text files per measurement station, where columns correspond to different variables and data rows to individual time stamps. Needless to say that the time stamps (or the covered periods) vary from station to station.</p>
<p>The basic workflow for reading of ungridded data, such as Aeronet data, is very similar to the reading of gridded data (comprising a reading class that handles a query and returns a data class, here <a class="reference external" href="http://aerocom.met.no/pyaerocom/api.html#module-pyaerocom.ungriddeddata">UngriddedData</a> (see also flow chart above).</p>
<p>Before we can continue with the data import, some things need to be said related to the caching of <code class="docutils literal notranslate"><span class="pre">UngriddedData</span></code> objects.</p>
</div>
<div class="section" id="Caching-of-UngriddedData">
<h2>Caching of UngriddedData<a class="headerlink" href="#Caching-of-UngriddedData" title="Permalink to this headline">¶</a></h2>
<p>Reading of ungridded data is often rather time-consuming. Therefore, pyaerocom uses a caching strategy that stores loaded instances of the <code class="docutils literal notranslate"><span class="pre">UngriddedData</span></code> class as pickle files in a cache directory (illustrated in the left hand side of the flowchart shown above). The loaction of the cache directory can be accessed via:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pya</span><span class="o">.</span><span class="n">const</span><span class="o">.</span><span class="n">CACHEDIR</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/home/jonasg/MyPyaerocom/_cache/jonasg&#39;
</pre></div></div>
</div>
<p>You may change this directory if required.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Caching is active? </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pya</span><span class="o">.</span><span class="n">const</span><span class="o">.</span><span class="n">CACHING</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Caching is active? True
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pya</span><span class="o">.</span><span class="n">const</span><span class="o">.</span><span class="n">CACHING</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pya</span><span class="o">.</span><span class="n">const</span><span class="o">.</span><span class="n">CACHING</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<p><strong>Note</strong>: if caching is active, make sure you have enough disk quota or change location where the files are stored.</p>
</div>
<div class="section" id="Read-Aeronet-Sun-v3-level-2-data">
<h2>Read Aeronet Sun v3 level 2 data<a class="headerlink" href="#Read-Aeronet-Sun-v3-level-2-data" title="Permalink to this headline">¶</a></h2>
<p>As illustrated in the flowchart above, ungridded observation data can be imported using the <code class="docutils literal notranslate"><span class="pre">ReadUngridded</span></code> class. The reading class requires an ID for the observation network that is supposed to be read. Let’s find the right ID for these data:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pya</span><span class="o">.</span><span class="n">browse_database</span><span class="p">(</span><span class="s1">&#39;Aeronet*V3*Lev2*&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Dataset name: AeronetSunV3Lev2.daily
Data directory: /lustre/storeA/project/aerocom/aerocom1/AEROCOM_OBSDATA/AeronetSunV3Lev2.0.daily/renamed
Supported variables: [&#39;od340aer&#39;, &#39;od440aer&#39;, &#39;od500aer&#39;, &#39;od870aer&#39;, &#39;ang4487aer&#39;, &#39;ang4487aer_calc&#39;, &#39;od550aer&#39;]
Last revision: 20190920

Dataset name: AeronetSunV3Lev2.AP
Data directory: /lustre/storeA/project/aerocom/aerocom1/AEROCOM_OBSDATA/AeronetSunV3Lev2.0.AP/renamed
Supported variables: [&#39;od340aer&#39;, &#39;od440aer&#39;, &#39;od500aer&#39;, &#39;od870aer&#39;, &#39;ang4487aer&#39;, &#39;ang4487aer_calc&#39;, &#39;od550aer&#39;]
Last revision: 20190511

Dataset name: AeronetSDAV3Lev2.daily
Data directory: /lustre/storeA/project/aerocom/aerocom1/AEROCOM_OBSDATA/Aeronet.SDA.V3L2.0.daily/renamed
Supported variables: [&#39;od500gt1aer&#39;, &#39;od500lt1aer&#39;, &#39;od500aer&#39;, &#39;ang4487aer&#39;, &#39;od550aer&#39;, &#39;od550gt1aer&#39;, &#39;od550lt1aer&#39;]
Last revision: 20190920
Reading failed for AeronetSDAV3Lev2.AP. Error: NetworkNotImplemented(&#39;No reading class available yet for dataset AeronetSDAV3Lev2.AP&#39;)

Dataset name: AeronetInvV3Lev2.daily
Data directory: /lustre/storeA/project/aerocom/aerocom1/AEROCOM_OBSDATA/Aeronet.Inv.V3L2.0.daily/renamed
Supported variables: [&#39;abs440aer&#39;, &#39;angabs4487aer&#39;, &#39;od440aer&#39;, &#39;ang4487aer&#39;, &#39;abs550aer&#39;, &#39;od550aer&#39;]
Last revision: 20190914
</pre></div></div>
</div>
<p>It found one match and the dataset ID is <em>AeronetSunV3Lev2.daily</em>. It also tells us what variables can be loaded via the interface.</p>
<p><strong>Note</strong>: You can safely ignore all the warnings in the output. These are due to the fact that the testdata set does not contain all observation networks that are available in the AEROCOM database.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">obs_reader</span> <span class="o">=</span> <span class="n">pya</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ReadUngridded</span><span class="p">(</span><span class="s1">&#39;AeronetSunV3Lev2.daily&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obs_reader</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Dataset name: AeronetSunV3Lev2.daily
Data directory: /lustre/storeA/project/aerocom/aerocom1/AEROCOM_OBSDATA/AeronetSunV3Lev2.0.daily/renamed
Supported variables: [&#39;od340aer&#39;, &#39;od440aer&#39;, &#39;od500aer&#39;, &#39;od870aer&#39;, &#39;ang4487aer&#39;, &#39;ang4487aer_calc&#39;, &#39;od550aer&#39;]
Last revision: 20190920
</pre></div></div>
</div>
<p>Let’s read the data (you can read a single or multiple variables at the same time). For now, we only read the AOD at 550 nm:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">aeronet_data</span> <span class="o">=</span> <span class="n">obs_reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">vars_to_retrieve</span><span class="o">=</span><span class="s1">&#39;od550aer&#39;</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">aeronet_data</span><span class="p">)</span> <span class="c1">#displays data type</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyaerocom.ungriddeddata.UngriddedData
</pre></div></div>
</div>
<p>As you can see, the data object is of type <code class="docutils literal notranslate"><span class="pre">UngriddedData</span></code>. Like the <code class="docutils literal notranslate"><span class="pre">GriddedData</span></code> object, also the <code class="docutils literal notranslate"><span class="pre">UngriddedData</span></code> class has an informative string representation (that can be printed):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">aeronet_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Pyaerocom UngriddedData
-----------------------
Contains networks: [&#39;AeronetSunV3Lev2.daily&#39;]
Contains variables: [&#39;od550aer&#39;]
Contains instruments: [&#39;sun_photometer&#39;]
Total no. of meta-blocks: 1230
Filters that were applied:
 Filter time log: 20191002122003
        Created od550aer single var object from multivar UngriddedData instance
</pre></div></div>
</div>
</div>
<div class="section" id="Plot-all-station-coordinates">
<h2>Plot all station coordinates<a class="headerlink" href="#Plot-all-station-coordinates" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">aeronet_data</span><span class="o">.</span><span class="n">plot_station_coordinates</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_79_0.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_79_0.png" />
</div>
</div>
</div>
<div class="section" id="Access-of-individual-stations">
<h2>Access of individual stations<a class="headerlink" href="#Access-of-individual-stations" title="Permalink to this headline">¶</a></h2>
<p>Get all station names:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">all_station_names</span> <span class="o">=</span> <span class="n">aeronet_data</span><span class="o">.</span><span class="n">unique_station_names</span>
<span class="n">all_station_names</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>  <span class="c1">#displays first 10 stations</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;AAOT&#39;,
 &#39;AOE_Baotou&#39;,
 &#39;ARM_Ascension_Is&#39;,
 &#39;ARM_Barnstable_MA&#39;,
 &#39;ARM_Cordoba&#39;,
 &#39;ARM_Darwin&#39;,
 &#39;ARM_Gan_Island&#39;,
 &#39;ARM_Graciosa&#39;,
 &#39;ARM_Highlands_MA&#39;,
 &#39;ARM_HyytialaFinland&#39;]
</pre></div></div>
</div>
<p>For instance, to access the data for the city of Leipzig, Germany, you can use square brackets with the station name of Leipzig:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">station_data</span> <span class="o">=</span> <span class="n">aeronet_data</span><span class="p">[</span><span class="s1">&#39;Leipzig&#39;</span><span class="p">]</span> <span class="c1"># this is fully equivalent with aeronet_data.to_station_data(&#39;Leipzig&#39;)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">station_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyaerocom.stationdata.StationData
</pre></div></div>
</div>
<p>As you can see, the returned object is of type <code class="docutils literal notranslate"><span class="pre">StationData</span></code>, which is one further data format of pyaerocom (note that this is not displayed in the simplified flowchart above). <code class="docutils literal notranslate"><span class="pre">StationData</span></code> may be useful for individual stations and is an extended Python dictionary (if you are familiar with Python).</p>
<p>You may print it to see what is in there:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">station_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Pyaerocom StationData
---------------------
var_info (BrowseDict):
  od550aer (OrderedDict):
    units: 1
    overlap: False
    ts_type: daily
    apply_constraints: False
    min_num_obs: None
station_coords (dict):
  latitude: 51.352500000000006
  longitude: 12.435277999999998
  altitude: 125.0
data_err (BrowseDict): &lt;empty_dict&gt;
overlap (BrowseDict): &lt;empty_dict&gt;
data_flagged (BrowseDict): &lt;empty_dict&gt;
filename: None
station_id: None
station_name: Leipzig
instrument_name: sun_photometer
PI: Brent_Holben
country: None
ts_type: daily
latitude: 51.352500000000006
longitude: 12.435277999999998
altitude: 125.0
data_id: AeronetSunV3Lev2.daily
dataset_name: None
data_product: None
data_version: None
data_level: None
revision_date: None
website: None
ts_type_src: daily
stat_merge_pref_attr: None
data_revision: 20190920

Data arrays
.................
dtime (ndarray, 6363 items): [2001-05-21T00:00:00.000000000, 2001-05-22T00:00:00.000000000, ..., 2018-10-20T00:00:00.000000000, 2018-10-21T00:00:00.000000000]
Pandas Series
.................
od550aer (Series, 6363 items)
</pre></div></div>
</div>
<p>As you can see, this station contains a time-series of the AOD at 550 nm. If you like, you can plot this time-series:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">station_data</span><span class="o">.</span><span class="n">insert_nans_timeseries</span><span class="p">(</span><span class="s1">&#39;od550aer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot_timeseries</span><span class="p">(</span><span class="s1">&#39;od550aer&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">station_data</span><span class="o">.</span><span class="n">plot_timeseries</span><span class="p">(</span><span class="s1">&#39;od550aer&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f2c2061e3c8&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_87_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_87_1.png" />
</div>
</div>
<p>You can also retrieve the <code class="docutils literal notranslate"><span class="pre">StationData</span></code> with specifying more constraints using <code class="docutils literal notranslate"><span class="pre">to_station_data</span></code> (e.g. in monthly resolution and only for the year 2010). And you can overlay different curves, by passing the axes instance returned by the plotting method:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ax</span><span class="o">=</span><span class="n">aeronet_data</span><span class="o">.</span><span class="n">to_station_data</span><span class="p">(</span><span class="s1">&#39;Leipzig&#39;</span><span class="p">,</span>
                                <span class="n">start</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span>
                                <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;daily&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot_timeseries</span><span class="p">(</span><span class="s1">&#39;od550aer&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">=</span><span class="n">aeronet_data</span><span class="o">.</span><span class="n">to_station_data</span><span class="p">(</span><span class="s1">&#39;Leipzig&#39;</span><span class="p">,</span>
                                <span class="n">start</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span>
                                <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot_timeseries</span><span class="p">(</span><span class="s1">&#39;od550aer&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Leipzig AODs 2010&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 1.0, &#39;Leipzig AODs 2010&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_89_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_89_1.png" />
</div>
</div>
</div>
<div class="section" id="You-can-also-plot-the-time-series-directly">
<h2>You can also plot the time-series directly<a class="headerlink" href="#You-can-also-plot-the-time-series-directly" title="Permalink to this headline">¶</a></h2>
<p>For instance, if you want to do an air-quality check for you next bouldering trip, you may call:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ts</span> <span class="o">=</span> <span class="n">aeronet_data</span><span class="o">.</span><span class="n">to_station_data</span><span class="p">(</span><span class="s1">&#39;Fontainebleau&#39;</span><span class="p">,</span> <span class="s1">&#39;od550aer&#39;</span><span class="p">,</span> <span class="mi">2006</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;monthly&#39;</span><span class="p">)</span>
<span class="n">ts</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
StationData([(&#39;dtime&#39;,
              array([&#39;2006-01-15T00:00:00.000000000&#39;, &#39;2006-02-15T00:00:00.000000000&#39;,
                     &#39;2006-03-15T00:00:00.000000000&#39;, &#39;2006-04-15T00:00:00.000000000&#39;,
                     &#39;2006-05-15T00:00:00.000000000&#39;, &#39;2006-06-15T00:00:00.000000000&#39;,
                     &#39;2006-07-15T00:00:00.000000000&#39;, &#39;2006-08-15T00:00:00.000000000&#39;,
                     &#39;2006-09-15T00:00:00.000000000&#39;, &#39;2006-10-15T00:00:00.000000000&#39;,
                     &#39;2006-11-15T00:00:00.000000000&#39;, &#39;2006-12-15T00:00:00.000000000&#39;],
                    dtype=&#39;datetime64[ns]&#39;)),
             (&#39;var_info&#39;,
              BrowseDict([(&#39;od550aer&#39;,
                           OrderedDict([(&#39;units&#39;, &#39;1&#39;),
                                        (&#39;overlap&#39;, False),
                                        (&#39;ts_type&#39;, &#39;monthly&#39;),
                                        (&#39;apply_constraints&#39;, True),
                                        (&#39;min_num_obs&#39;,
                                         {&#39;yearly&#39;: {&#39;monthly&#39;: 3},
                                          &#39;monthly&#39;: {&#39;daily&#39;: 7},
                                          &#39;daily&#39;: {&#39;hourly&#39;: 6},
                                          &#39;hourly&#39;: {&#39;minutely&#39;: 15}})]))])),
             (&#39;station_coords&#39;,
              {&#39;latitude&#39;: 48.406666999999985,
               &#39;longitude&#39;: 2.6802780000000004,
               &#39;altitude&#39;: 85.0}),
             (&#39;data_err&#39;, BrowseDict()),
             (&#39;overlap&#39;, BrowseDict()),
             (&#39;data_flagged&#39;, BrowseDict()),
             (&#39;filename&#39;, None),
             (&#39;station_id&#39;, None),
             (&#39;station_name&#39;, &#39;Fontainebleau&#39;),
             (&#39;instrument_name&#39;, &#39;sun_photometer&#39;),
             (&#39;PI&#39;, &#39;Brent_Holben&#39;),
             (&#39;country&#39;, None),
             (&#39;ts_type&#39;, &#39;monthly&#39;),
             (&#39;latitude&#39;, 48.406666999999985),
             (&#39;longitude&#39;, 2.6802780000000004),
             (&#39;altitude&#39;, 85.0),
             (&#39;data_id&#39;, &#39;AeronetSunV3Lev2.daily&#39;),
             (&#39;dataset_name&#39;, None),
             (&#39;data_product&#39;, None),
             (&#39;data_version&#39;, None),
             (&#39;data_level&#39;, None),
             (&#39;revision_date&#39;, None),
             (&#39;website&#39;, None),
             (&#39;ts_type_src&#39;, &#39;daily&#39;),
             (&#39;stat_merge_pref_attr&#39;, None),
             (&#39;data_revision&#39;, &#39;20190920&#39;),
             (&#39;od550aer&#39;, 2006-01-15    0.176742
              2006-02-15         NaN
              2006-03-15    0.252403
              2006-04-15    0.195318
              2006-05-15    0.215357
              2006-06-15    0.195586
              2006-07-15    0.224991
              2006-08-15    0.131814
              2006-09-15    0.151338
              2006-10-15    0.141222
              2006-11-15    0.088815
              2006-12-15         NaN
              Name: mean, dtype: float64)])
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">aeronet_data</span><span class="o">.</span><span class="n">plot_station_timeseries</span><span class="p">(</span><span class="s1">&#39;Fontainebleau&#39;</span><span class="p">,</span> <span class="s1">&#39;od550aer&#39;</span><span class="p">,</span> <span class="n">ts_type</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">,</span>
                                     <span class="n">start</span><span class="o">=</span><span class="mi">2006</span><span class="p">)</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;AOD in Fontainebleau, 2006&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 1.0, &#39;AOD in Fontainebleau, 2006&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_92_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_92_1.png" />
</div>
</div>
<p>Seems like November is a good time (maybe a bit rainy though)</p>
<p>Now that we have different data objects loaded we can continue with colocation. In the following, both the all-sky and the clear-sky data from CAM53-Oslo will be colocated with the subset of Aeronet stations that we just loaded.</p>
<p>The colocation will be performed for the year of 2010 and two scatter plots will be created.</p>
<p>You have also the option to apply a certain filter when colocating using a valid filter name. Here, we use global data and exclude mountain sides.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">col_all_sky_glob</span> <span class="o">=</span> <span class="n">pya</span><span class="o">.</span><span class="n">colocation</span><span class="o">.</span><span class="n">colocate_gridded_ungridded</span><span class="p">(</span><span class="n">od550aer</span><span class="p">,</span> <span class="n">aeronet_data</span><span class="p">,</span>
                                                                <span class="n">ts_type</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">,</span>
                                                                <span class="n">start</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span>
                                                                <span class="n">filter_name</span><span class="o">=</span><span class="s1">&#39;WORLD-noMOUNTAINS&#39;</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">col_all_sky_glob</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Setting od550aer outlier lower lim: -1.00
Setting od550aer outlier upper lim: 10.00
Interpolating data of shape (12, 192, 288). This may take a while.
Successfully interpolated cube
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyaerocom.colocateddata.ColocatedData
</pre></div></div>
</div>
<p>Let’s do the same for the clear-sky data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">col_clear_sky_glob</span> <span class="o">=</span> <span class="n">pya</span><span class="o">.</span><span class="n">colocation</span><span class="o">.</span><span class="n">colocate_gridded_ungridded</span><span class="p">(</span><span class="n">od550csaer</span><span class="p">,</span> <span class="n">aeronet_data</span><span class="p">,</span>
                                                                  <span class="n">ts_type</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">,</span>
                                                                  <span class="n">start</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span>
                                                                  <span class="n">filter_name</span><span class="o">=</span><span class="s1">&#39;WORLD-noMOUNTAINS&#39;</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">col_clear_sky_glob</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Setting od550aer outlier lower lim: -1.00
Setting od550aer outlier upper lim: 10.00
Interpolating data of shape (12, 192, 288). This may take a while.
Successfully interpolated cube
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyaerocom.colocateddata.ColocatedData
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ax1</span> <span class="o">=</span> <span class="n">col_all_sky_glob</span><span class="o">.</span><span class="n">plot_scatter</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;All sky (2010, monthly)&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_99_0.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_99_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ax2</span> <span class="o">=</span> <span class="n">col_clear_sky_glob</span><span class="o">.</span><span class="n">plot_scatter</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Clear sky (2010, monthly)&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_100_0.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_100_0.png" />
</div>
</div>
<p>… or for EUROPE:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pya</span><span class="o">.</span><span class="n">colocation</span><span class="o">.</span><span class="n">colocate_gridded_ungridded</span><span class="p">(</span><span class="n">od550aer</span><span class="p">,</span> <span class="n">aeronet_data</span><span class="p">,</span>
                                          <span class="n">ts_type</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">,</span>
                                          <span class="n">start</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span>
                                          <span class="n">filter_name</span><span class="o">=</span><span class="s1">&#39;EUROPE-noMOUNTAINS&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot_scatter</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Setting od550aer outlier lower lim: -1.00
Setting od550aer outlier upper lim: 10.00
Interpolating data of shape (12, 192, 288). This may take a while.
Successfully interpolated cube
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_102_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_102_1.png" />
</div>
</div>
</div>
<div class="section" id="Colocation-with-satellite-AODs-from-MODIS">
<h2>Colocation with satellite AODs from MODIS<a class="headerlink" href="#Colocation-with-satellite-AODs-from-MODIS" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sat_data</span> <span class="o">=</span> <span class="n">pya</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ReadGridded</span><span class="p">(</span><span class="s1">&#39;MODIS6.aqua&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_var</span><span class="p">(</span><span class="s1">&#39;od550aer&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">2010</span><span class="p">)</span>
<span class="n">sat_data</span><span class="o">.</span><span class="n">quickplot_map</span><span class="p">(</span><span class="n">vmin</span><span class="o">=.</span><span class="mi">001</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">c_under</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Overwriting unit unknown in cube od550aer with value &#34;1&#34;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_104_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_104_1.png" />
</div>
</div>
<p>Colocation is straight forward as shown below. The data will be regridded to 5x5 degrees resolution during the colocation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">col_modis_monthly</span> <span class="o">=</span> <span class="n">pya</span><span class="o">.</span><span class="n">colocation</span><span class="o">.</span><span class="n">colocate_gridded_gridded</span><span class="p">(</span><span class="n">gridded_data</span><span class="o">=</span><span class="n">od550aer</span><span class="p">,</span>
                                                            <span class="n">gridded_data_ref</span><span class="o">=</span><span class="n">sat_data</span><span class="p">,</span>
                                                            <span class="n">ts_type</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">,</span>
                                                            <span class="n">regrid_res_deg</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                                            <span class="n">remove_outliers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                            <span class="n">harmonise_units</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Interpolating data of shape (365, 180, 360). This may take a while.
Successfully interpolated cube
Setting od550aer outlier lower lim: -1.00
Setting od550aer outlier upper lim: 10.00
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">col_modis_monthly</span><span class="o">.</span><span class="n">plot_scatter</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f2c1049a198&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_107_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_107_1.png" />
</div>
</div>
<p>You may also change the plot style, to adapt better to the large amount of data points here in these satellite products:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">col_modis_monthly</span><span class="o">.</span><span class="n">plot_scatter</span><span class="p">(</span><span class="n">ms</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">mec</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f2c10614908&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/pyaerocom-tutorials_getting_started_analysis_109_1.png" src="../_images/pyaerocom-tutorials_getting_started_analysis_109_1.png" />
</div>
</div>
</div>
<div class="section" id="Remark-on-the-ColocatedData-object">
<h2>Remark on the ColocatedData object<a class="headerlink" href="#Remark-on-the-ColocatedData-object" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ColocatedData</span></code> object has not many features and methods implemented yet. But it builds a good basis for further analysis using features of the underlying data-structure, which is an instance of the <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.html">xarray.DataArray</a> class and can be accessed via the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute if the <code class="docutils literal notranslate"><span class="pre">ColocatedData</span></code> object:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">col_all_sky_glob</span><span class="o">.</span><span class="n">data</span>
<span class="nb">type</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
xarray.core.dataarray.DataArray
</pre></div></div>
</div>
<p>You may want to read more about it <a class="reference external" href="http://xarray.pydata.org/en/stable/data-structures.html">here</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="obsolete/tut00_get_started.html" class="btn btn-neutral float-right" title="Getting started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started_setup.html" class="btn btn-neutral float-left" title="Checking pyaerocom installation and access to data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, MET Norway

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>